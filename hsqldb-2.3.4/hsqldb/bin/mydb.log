/*C7*/SET SCHEMA PUBLIC
DISCONNECT
/*C8*/SET SCHEMA PUBLIC
drop table Compte if exists
drop table HistoriqueOperations if exists
drop table User if exists
create table Compte (DTYPE varchar(31) not null, id bigint generated by default as identity (start with 1), solde numeric(19,2), montantDecouvert numeric(19,2), client_id bigint, primary key (id))
create table HistoriqueOperations (id bigint generated by default as identity (start with 1), dateOperation date, montant numeric(19,2), operation varchar(255), client_id bigint, compte_id bigint, primary key (id))
create table User (id bigint generated by default as identity (start with 1), nom varchar(255), password varchar(255), prenom varchar(255), role varchar(255), username varchar(255), primary key (id))
alter table Compte add constraint FKsjjl4fn17t9uy552so0l9xlc7 foreign key (client_id) references User
alter table HistoriqueOperations add constraint FKg9qg0yr2aq33p8fwv28be325 foreign key (client_id) references User
alter table HistoriqueOperations add constraint FKq1tyq3e5mwn0cpeo5mphe275m foreign key (compte_id) references Compte
INSERT INTO USER VALUES(1,'R','toor','oot','ROLE_ADMIN','oR')
COMMIT
INSERT INTO COMPTE VALUES('CompteEpargne',1,300000.00,NULL,1)
COMMIT
INSERT INTO USER VALUES(2,'Quincy','password','Jordane','ROLE_USER','JQuincy')
COMMIT
INSERT INTO COMPTE VALUES('CompteCourant',2,500.00,4000.00,2)
COMMIT
INSERT INTO COMPTE VALUES('CompteEpargne',3,10000.00,NULL,2)
COMMIT
DISCONNECT
/*C9*/SET SCHEMA PUBLIC
DISCONNECT
/*C10*/SET SCHEMA PUBLIC
alter table Compte drop constraint FKsjjl4fn17t9uy552so0l9xlc7
alter table HistoriqueOperations drop constraint FKg9qg0yr2aq33p8fwv28be325
alter table HistoriqueOperations drop constraint FKq1tyq3e5mwn0cpeo5mphe275m
drop table Compte if exists
drop table HistoriqueOperations if exists
drop table User if exists
create table Compte (DTYPE varchar(31) not null, id bigint generated by default as identity (start with 1), solde numeric(19,2), montantDecouvert numeric(19,2), client_id bigint, primary key (id))
create table HistoriqueOperations (id bigint generated by default as identity (start with 1), dateOperation date, montant numeric(19,2), operation varchar(255), client_id bigint, compte_id bigint, primary key (id))
create table User (id bigint generated by default as identity (start with 1), nom varchar(255), password varchar(255), prenom varchar(255), role varchar(255), username varchar(255), primary key (id))
alter table Compte add constraint FKsjjl4fn17t9uy552so0l9xlc7 foreign key (client_id) references User
alter table HistoriqueOperations add constraint FKg9qg0yr2aq33p8fwv28be325 foreign key (client_id) references User
alter table HistoriqueOperations add constraint FKq1tyq3e5mwn0cpeo5mphe275m foreign key (compte_id) references Compte
INSERT INTO USER VALUES(1,'R','toor','oot','ROLE_ADMIN','oR')
COMMIT
INSERT INTO COMPTE VALUES('CompteEpargne',1,300000.00,NULL,1)
COMMIT
INSERT INTO USER VALUES(2,'Quincy','password','Jordane','ROLE_USER','JQuincy')
COMMIT
INSERT INTO COMPTE VALUES('CompteCourant',2,500.00,4000.00,2)
COMMIT
INSERT INTO COMPTE VALUES('CompteEpargne',3,10000.00,NULL,2)
COMMIT
INSERT INTO HISTORIQUEOPERATIONS VALUES(1,'2017-05-15',5.00,'DEBIT',2,2)
INSERT INTO HISTORIQUEOPERATIONS VALUES(2,'2017-05-15',5.00,'CREDIT',1,1)
DELETE FROM COMPTE WHERE ID=2
INSERT INTO COMPTE VALUES('CompteCourant',2,495.00,4000.00,2)
DELETE FROM COMPTE WHERE ID=1
INSERT INTO COMPTE VALUES('CompteEpargne',1,300005.00,NULL,1)
COMMIT
INSERT INTO HISTORIQUEOPERATIONS VALUES(3,'2017-05-15',5.00,'DEBIT',1,1)
INSERT INTO HISTORIQUEOPERATIONS VALUES(4,'2017-05-15',5.00,'CREDIT',2,2)
DELETE FROM COMPTE WHERE ID=1
INSERT INTO COMPTE VALUES('CompteEpargne',1,300000.00,NULL,1)
DELETE FROM COMPTE WHERE ID=2
INSERT INTO COMPTE VALUES('CompteCourant',2,500.00,4000.00,2)
COMMIT
